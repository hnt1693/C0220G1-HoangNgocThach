<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="Game.js"></script>
    <script src="Plane.js"></script>
    <script src="ImageManager.js"></script>
</head>
<body onkeydown="Handler(event,false)" onload="gameLoop()" onkeyup="Handler(event, true)">
<canvas id="myCanvas" width="400" height="700" style="background-color: lightgrey"></canvas>
<script>
    let context = document.getElementById("myCanvas");
    let ctx = context.getContext("2d");

    function Handler(event, isReleasing) {
        console.log("Keycode = " + event.keyCode + ". isReleasing = " + isReleasing);
        keyStatusMap["KEY" + event.keyCode] = isReleasing;
        if (event.keyCode === 37 && isReleasing === false) {
            game.plane.moveLeft();

        } else if (event.keyCode == 39 && isReleasing === false) {
            game.plane.moveRight();
        } else if (event.keyCode == 38) {


        } else if (event.keyCode == 40) {


        } else if (event.keyCode == 32) {

        } else if (event.keyCode == 13) {


        }

        if (keyStatusMap["KEY37"] === true && keyStatusMap["KEY39"] === true) {
            game.plane.stop();
        }

    }

    let game = new Game();

    function gameLoop() {
        game.update();
        game.draw();
        requestAnimationFrame(gameLoop);
    }

    keyStatusMap = {};
</script>
</body>
</html>
